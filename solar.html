<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Solar System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            background-color: #000;
            color: #fff;
        }
        canvas {
            display: block;
        }
        #info-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            max-width: 350px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
            display: none; /* Hidden by default */
            z-index: 10;
            color: #e0ffff; /* Light cyan */
        }
        #info-panel h2 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #00ffff; /* Cyan */
        }
        #info-panel p {
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 8px;
        }
        #close-btn {
            background-color: #00ffff;
            color: #000;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 15px;
            transition: background-color 0.3s ease;
        }
        #close-btn:hover {
            background-color: #00e0e0;
        }
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: #fff;
            font-size: 1.5rem;
            z-index: 9999;
        }
        .spinner {
            border: 8px solid #f3f3f3; /* Light grey */
            border-top: 8px solid #00ffff; /* Blue */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 2s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="loading-overlay">
        <div class="spinner"></div>
        Loading Solar System...
    </div>

    <div id="info-panel" class="hidden">
        <h2 id="planet-name"></h2>
        <p id="planet-description"></p>
        <button id="close-btn">Close</button>
    </div>

    <script type="module">
        // --- Three.js Setup ---
        let scene, camera, renderer;
        let raycaster, mouse;
        const planets = [];
        const orbitLines = [];
        let controls; // For camera control

        // Planet data
        const planetData = {
            "Sun": {
                description: "The Sun is the star at the center of our solar system. It is a nearly perfect sphere of hot plasma, heated to incandescence by nuclear fusion reactions in its core. It radiates energy primarily as light, ultraviolet, and infrared radiation.",
                size: "Diameter: 1.39 million km",
                distance: "N/A"
            },
            "Mercury": {
                description: "Mercury is the smallest planet in our solar system and the closest to the Sun. Its surface is heavily cratered, resembling Earth's Moon, indicating a geologically inactive past.",
                size: "Diameter: 4,879 km",
                distance: "58 million km"
            },
            "Venus": {
                description: "Venus is the second planet from the Sun and is often called Earth's 'sister planet' due to their similar size and composition. However, Venus has a thick, toxic atmosphere and scorching surface temperatures.",
                size: "Diameter: 12,104 km",
                distance: "108 million km"
            },
            "Earth": {
                description: "Earth is the third planet from the Sun and the only astronomical object known to harbor life. Its atmosphere, liquid water, and moderate temperatures make it unique.",
                size: "Diameter: 12,742 km",
                distance: "150 million km"
            },
            "Mars": {
                description: "Mars is the fourth planet from the Sun and is often referred to as the 'Red Planet' due to its reddish appearance. It has a thin atmosphere and polar ice caps.",
                size: "Diameter: 6,779 km",
                distance: "228 million km"
            },
            "Jupiter": {
                description: "Jupiter is the fifth planet from the Sun and the largest in the solar system. It is a gas giant with a distinctive Great Red Spot, a giant storm larger than Earth.",
                size: "Diameter: 139,822 km",
                distance: "778 million km"
            },
            "Saturn": {
                description: "Saturn is the sixth planet from the Sun and is famous for its prominent ring system, which is made up of countless small ice particles and rock fragments.",
                size: "Diameter: 116,460 km",
                distance: "1.4 billion km"
            },
            "Uranus": {
                description: "Uranus is the seventh planet from the Sun and is an ice giant. It has a unique sideways rotation, possibly due to a collision early in its history.",
                size: "Diameter: 50,724 km",
                distance: "2.9 billion km"
            },
            "Neptune": {
                description: "Neptune is the eighth and farthest known planet from the Sun in our solar system. It is another ice giant, known for its strong winds and dynamic storms.",
                size: "Diameter: 49,244 km",
                distance: "4.5 billion km"
            }
        };

        // Initialize the scene
        function init() {
            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x050510); // Dark space background

            // Camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000);
            camera.position.set(0, 50, 200); // Adjust camera position to see more of the system

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // Lights
            const ambientLight = new THREE.AmbientLight(0x333333); // Soft ambient light
            scene.add(ambientLight);

            const pointLight = new THREE.PointLight(0xffffff, 1.5, 0); // Sun's light
            pointLight.position.set(0, 0, 0);
            scene.add(pointLight);

            // Raycaster for interaction
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            // Add the Sun
            const sunGeometry = new THREE.SphereGeometry(15, 64, 64);
            const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xffaa00, emissive: 0xffa000, emissiveIntensity: 1 }); // Emissive for glowing effect
            const sun = new THREE.Mesh(sunGeometry, sunMaterial);
            sun.name = "Sun";
            scene.add(sun);
            planets.push(sun); // Add sun to planets array for raycasting

            // Add planets
            const planetConfigs = [
                { name: "Mercury", radius: 1.5, distance: 30, color: 0x888888, speed: 0.04 },
                { name: "Venus", radius: 3, distance: 50, color: 0xaa6600, speed: 0.03 },
                { name: "Earth", radius: 3.5, distance: 70, color: 0x0000ff, speed: 0.02 },
                { name: "Mars", radius: 2, distance: 90, color: 0xff0000, speed: 0.015 },
                { name: "Jupiter", radius: 8, distance: 150, color: 0xcc9966, speed: 0.01 },
                { name: "Saturn", radius: 7, distance: 200, color: 0xddeebb, speed: 0.008 },
                { name: "Uranus", radius: 5, distance: 250, color: 0x88ccff, speed: 0.006 },
                { name: "Neptune", radius: 5, distance: 300, color: 0x000088, speed: 0.005 }
            ];

            planetConfigs.forEach(config => {
                const geometry = new THREE.SphereGeometry(config.radius, 32, 32);
                const material = new THREE.MeshStandardMaterial({ color: config.color });
                const planet = new THREE.Mesh(geometry, material);
                planet.name = config.name;
                planet.userData.distance = config.distance; // Store distance for orbit calculation
                planet.userData.speed = config.speed; // Store speed for rotation
                planet.position.set(config.distance, 0, 0); // Initial position
                scene.add(planet);
                planets.push(planet);

                // Create orbit line
                const orbitGeometry = new THREE.RingGeometry(config.distance - 0.5, config.distance + 0.5, 128);
                const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0x333333, side: THREE.DoubleSide });
                const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
                orbit.rotation.x = Math.PI / 2; // Rotate to be horizontal
                scene.add(orbit);
                orbitLines.push(orbit);
            });

            // Add camera controls (OrbitControls)
            // You'd typically import OrbitControls from 'three/examples/jsm/controls/OrbitControls.js'
            // For this self-contained example, we'll manually implement basic mouse controls.
            // Manual camera control variables
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };

            renderer.domElement.addEventListener('mousedown', (e) => {
                isDragging = true;
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });

            renderer.domElement.addEventListener('mouseup', () => {
                isDragging = false;
            });

            renderer.domElement.addEventListener('mousemove', (e) => {
                if (!isDragging) return;

                const deltaX = e.clientX - previousMousePosition.x;
                const deltaY = e.clientY - previousMousePosition.y;

                // Rotate camera around the center (solar system origin)
                const rotationSpeed = 0.005;
                const axisY = new THREE.Vector3(0, 1, 0); // Y-axis for horizontal rotation
                const axisX = new THREE.Vector3(1, 0, 0); // X-axis for vertical rotation

                camera.position.applyAxisAngle(axisY, -deltaX * rotationSpeed);
                camera.position.applyAxisAngle(axisX, -deltaY * rotationSpeed);
                camera.lookAt(0, 0, 0); // Always look at the center

                previousMousePosition = { x: e.clientX, y: e.clientY };
            });

            // Handle window resize
            window.addEventListener('resize', onWindowResize, false);
            document.addEventListener('mousemove', onMouseMove, false);
            document.addEventListener('click', onClick, false);

            // Hide loading overlay
            document.getElementById('loading-overlay').style.display = 'none';
        }

        // --- Animation Loop ---
        function animate() {
            requestAnimationFrame(animate);

            // Rotate planets around the sun
            planets.forEach(planet => {
                if (planet.name !== "Sun") {
                    const angle = Date.now() * planet.userData.speed * 0.001; // Slower speed
                    const distance = planet.userData.distance;
                    planet.position.x = Math.cos(angle) * distance;
                    planet.position.z = Math.sin(angle) * distance;
                }
                // Self-rotation for all planets (including Sun)
                planet.rotation.y += 0.005;
            });

            renderer.render(scene, camera);
        }

        // --- Event Handlers ---
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function onMouseMove(event) {
            // Calculate mouse position in normalized device coordinates (-1 to +1)
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        }

        function onClick() {
            // Update the picking ray with the camera and mouse position
            raycaster.setFromCamera(mouse, camera);

            // Calculate objects intersecting the picking ray
            const intersects = raycaster.intersectObjects(planets);

            const infoPanel = document.getElementById('info-panel');
            const planetNameElement = document.getElementById('planet-name');
            const planetDescriptionElement = document.getElementById('planet-description');

            if (intersects.length > 0) {
                const clickedPlanet = intersects[0].object;
                const data = planetData[clickedPlanet.name];

                if (data) {
                    planetNameElement.textContent = clickedPlanet.name;
                    planetDescriptionElement.innerHTML = `
                        <strong>Description:</strong> ${data.description}<br>
                        <strong>Size:</strong> ${data.size}<br>
                        <strong>Distance from Sun:</strong> ${data.distance}
                    `;
                    infoPanel.style.display = 'block';
                }
            } else {
                infoPanel.style.display = 'none'; // Hide if no planet is clicked
            }
        }

        // Close button for info panel
        document.getElementById('close-btn').addEventListener('click', () => {
            document.getElementById('info-panel').style.display = 'none';
        });

        // Initialize and start animation on window load
        window.onload = function () {
            init();
            animate();
        };
    </script>
</body>
</html>
